// Kernel de Eclipse OS para hardware real
#include <stdint.h>
#include <stddef.h>

// Multiboot header
struct multiboot_header {
    uint32_t magic;
    uint32_t flags;
    uint32_t checksum;
} __attribute__((packed));

// Header de Multiboot
__attribute__((section(".multiboot")))
__attribute__((aligned(4)))
const struct multiboot_header mb_header = {
    .magic = 0x1BADB002,
    .flags = 0x00000000,
    .checksum = -(0x1BADB002 + 0x00000000)
};

// Estructura para información de hardware
struct hardware_info {
    uint32_t vga_width;
    uint32_t vga_height;
    uint32_t vga_bpp;
    uint32_t* vga_buffer;
    uint32_t memory_size;
    uint32_t cpu_speed;
};

struct hardware_info hw_info = {0};

// Colores para hardware real
#define COLOR_BLACK     0x000000
#define COLOR_WHITE     0xFFFFFF
#define COLOR_RED       0xFF0000
#define COLOR_GREEN     0x00FF00
#define COLOR_BLUE      0x0000FF
#define COLOR_YELLOW    0xFFFF00
#define COLOR_CYAN      0x00FFFF
#define COLOR_MAGENTA   0xFF00FF
#define COLOR_GRAY      0x808080
#define COLOR_DARK_GRAY 0x404040
#define COLOR_LIGHT_GRAY 0xC0C0C0
#define COLOR_ORANGE    0xFFA500
#define COLOR_PURPLE    0x800080

// Función para detectar hardware VGA real
void detect_vga_hardware(void) {
    // Detectar resolución VGA estándar
    hw_info.vga_width = 1024;
    hw_info.vga_height = 768;
    hw_info.vga_bpp = 32;
    
    // Usar framebuffer estándar para hardware real
    hw_info.vga_buffer = (uint32_t*)0xFD000000;
    
    // Detectar memoria (simplificado)
    hw_info.memory_size = 512 * 1024 * 1024; // 512MB por defecto
    hw_info.cpu_speed = 2000; // 2GHz por defecto
}

// Función para dibujar pixel en hardware real
void draw_pixel_real(uint32_t x, uint32_t y, uint32_t color) {
    if (x < hw_info.vga_width && y < hw_info.vga_height) {
        hw_info.vga_buffer[y * hw_info.vga_width + x] = color;
    }
}

// Función para dibujar rectángulo en hardware real
void draw_rect_real(uint32_t x, uint32_t y, uint32_t width, uint32_t height, uint32_t color) {
    for (uint32_t dy = 0; dy < height; dy++) {
        for (uint32_t dx = 0; dx < width; dx++) {
            draw_pixel_real(x + dx, y + dy, color);
        }
    }
}

// Fuente mejorada para hardware real (16x16)
void draw_char_real(uint32_t x, uint32_t y, char c, uint32_t color) {
    // Fuente 16x16 más legible para hardware real
    static const uint16_t font_16x16[][16] = {
        // A (0)
        {0x0000, 0x0000, 0x0180, 0x0180, 0x03C0, 0x03C0, 0x0660, 0x0660, 
         0x0C30, 0x0C30, 0x1FF8, 0x1FF8, 0x300C, 0x300C, 0x6006, 0x6006},
        // B (1)
        {0x0000, 0x0000, 0x7FFC, 0x7FFC, 0x6006, 0x6006, 0x7FFC, 0x7FFC, 
         0x6006, 0x6006, 0x6006, 0x6006, 0x7FFC, 0x7FFC, 0x0000, 0x0000},
        // C (2)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x6000, 0x6000, 
         0x6000, 0x6000, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 0x0000, 0x0000},
        // D (3)
        {0x0000, 0x0000, 0x7FF0, 0x7FF0, 0x6018, 0x6018, 0x6006, 0x6006, 
         0x6006, 0x6006, 0x6018, 0x6018, 0x7FF0, 0x7FF0, 0x0000, 0x0000},
        // E (4)
        {0x0000, 0x0000, 0x7FFE, 0x7FFE, 0x6000, 0x6000, 0x7FFC, 0x7FFC, 
         0x6000, 0x6000, 0x6000, 0x6000, 0x7FFE, 0x7FFE, 0x0000, 0x0000},
        // F (5)
        {0x0000, 0x0000, 0x7FFE, 0x7FFE, 0x6000, 0x6000, 0x7FFC, 0x7FFC, 
         0x6000, 0x6000, 0x6000, 0x6000, 0x6000, 0x6000, 0x0000, 0x0000},
        // G (6)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x6000, 0x6000, 
         0x61FE, 0x61FE, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 0x0000, 0x0000},
        // H (7)
        {0x0000, 0x0000, 0x6006, 0x6006, 0x6006, 0x6006, 0x7FFE, 0x7FFE, 
         0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x0000, 0x0000},
        // I (8)
        {0x0000, 0x0000, 0x7FFE, 0x7FFE, 0x0180, 0x0180, 0x0180, 0x0180, 
         0x0180, 0x0180, 0x0180, 0x0180, 0x7FFE, 0x7FFE, 0x0000, 0x0000},
        // J (9)
        {0x0000, 0x0000, 0x7FFE, 0x7FFE, 0x0060, 0x0060, 0x0060, 0x0060, 
         0x6060, 0x6060, 0x6060, 0x6060, 0x3FC0, 0x3FC0, 0x0000, 0x0000},
        // K (10)
        {0x0000, 0x0000, 0x6006, 0x6006, 0x6018, 0x6018, 0x6060, 0x6060, 
         0x6180, 0x6180, 0x6060, 0x6060, 0x6018, 0x6018, 0x0000, 0x0000},
        // L (11)
        {0x0000, 0x0000, 0x6000, 0x6000, 0x6000, 0x6000, 0x6000, 0x6000, 
         0x6000, 0x6000, 0x6000, 0x6000, 0x7FFE, 0x7FFE, 0x0000, 0x0000},
        // M (12)
        {0x0000, 0x0000, 0x6006, 0x6006, 0x700E, 0x700E, 0x781E, 0x781E, 
         0x6C36, 0x6C36, 0x6666, 0x6666, 0x6006, 0x6006, 0x0000, 0x0000},
        // N (13)
        {0x0000, 0x0000, 0x6006, 0x6006, 0x7006, 0x7006, 0x7806, 0x7806, 
         0x6C06, 0x6C06, 0x6606, 0x6606, 0x6006, 0x6006, 0x0000, 0x0000},
        // O (14)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x6006, 0x6006, 
         0x6006, 0x6006, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 0x0000, 0x0000},
        // P (15)
        {0x0000, 0x0000, 0x7FFC, 0x7FFC, 0x6006, 0x6006, 0x7FFC, 0x7FFC, 
         0x6000, 0x6000, 0x6000, 0x6000, 0x6000, 0x6000, 0x0000, 0x0000},
        // Q (16)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x6006, 0x6006, 
         0x6006, 0x6006, 0x1FF8, 0x1FF8, 0x0006, 0x0006, 0x0000, 0x0000},
        // R (17)
        {0x0000, 0x0000, 0x7FFC, 0x7FFC, 0x6006, 0x6006, 0x7FFC, 0x7FFC, 
         0x6180, 0x6180, 0x6060, 0x6060, 0x6018, 0x6018, 0x0000, 0x0000},
        // S (18)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 
         0x0006, 0x0006, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 0x0000, 0x0000},
        // T (19)
        {0x0000, 0x0000, 0x7FFE, 0x7FFE, 0x0180, 0x0180, 0x0180, 0x0180, 
         0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0000, 0x0000},
        // U (20)
        {0x0000, 0x0000, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 
         0x6006, 0x6006, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 0x0000, 0x0000},
        // V (21)
        {0x0000, 0x0000, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 0x6006, 
         0x300C, 0x300C, 0x1818, 0x1818, 0x0C30, 0x0C30, 0x0000, 0x0000},
        // W (22)
        {0x0000, 0x0000, 0x6006, 0x6006, 0x6006, 0x6006, 0x6666, 0x6666, 
         0x6C36, 0x6C36, 0x781E, 0x781E, 0x700E, 0x700E, 0x0000, 0x0000},
        // X (23)
        {0x0000, 0x0000, 0x6006, 0x6006, 0x300C, 0x300C, 0x1818, 0x1818, 
         0x1818, 0x1818, 0x300C, 0x300C, 0x6006, 0x6006, 0x0000, 0x0000},
        // Y (24)
        {0x0000, 0x0000, 0x6006, 0x6006, 0x300C, 0x300C, 0x1818, 0x1818, 
         0x0C30, 0x0C30, 0x0C30, 0x0C30, 0x0C30, 0x0C30, 0x0000, 0x0000},
        // Z (25)
        {0x0000, 0x0000, 0x7FFE, 0x7FFE, 0x000C, 0x000C, 0x0018, 0x0018, 
         0x0060, 0x0060, 0x0180, 0x0180, 0x7FFE, 0x7FFE, 0x0000, 0x0000},
        // Espacio (26)
        {0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
         0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},
        // ! (27)
        {0x0000, 0x0000, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 
         0x0180, 0x0180, 0x0000, 0x0000, 0x0180, 0x0180, 0x0000, 0x0000},
        // ? (28)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x0006, 0x0006, 
         0x0018, 0x0018, 0x0060, 0x0060, 0x0000, 0x0000, 0x0180, 0x0180},
        // : (29)
        {0x0000, 0x0000, 0x0000, 0x0000, 0x0180, 0x0180, 0x0000, 0x0000, 
         0x0000, 0x0000, 0x0180, 0x0180, 0x0000, 0x0000, 0x0000, 0x0000},
        // - (30)
        {0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x7FFE, 0x7FFE, 
         0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},
        // = (31)
        {0x0000, 0x0000, 0x0000, 0x0000, 0x7FFE, 0x7FFE, 0x0000, 0x0000, 
         0x7FFE, 0x7FFE, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000},
        // ( (32)
        {0x0000, 0x0000, 0x0030, 0x0030, 0x00C0, 0x00C0, 0x0300, 0x0300, 
         0x0300, 0x0300, 0x00C0, 0x00C0, 0x0030, 0x0030, 0x0000, 0x0000},
        // ) (33)
        {0x0000, 0x0000, 0x0C00, 0x0C00, 0x0300, 0x0300, 0x00C0, 0x00C0, 
         0x00C0, 0x00C0, 0x0300, 0x0300, 0x0C00, 0x0C00, 0x0000, 0x0000},
        // [ (34)
        {0x0000, 0x0000, 0x7FFE, 0x7FFE, 0x6000, 0x6000, 0x6000, 0x6000, 
         0x6000, 0x6000, 0x6000, 0x6000, 0x7FFE, 0x7FFE, 0x0000, 0x0000},
        // ] (35)
        {0x0000, 0x0000, 0x7FFE, 0x7FFE, 0x0006, 0x0006, 0x0006, 0x0006, 
         0x0006, 0x0006, 0x0006, 0x0006, 0x7FFE, 0x7FFE, 0x0000, 0x0000},
        // { (36)
        {0x0000, 0x0000, 0x0030, 0x0030, 0x00C0, 0x00C0, 0x7FFE, 0x7FFE, 
         0x00C0, 0x00C0, 0x0030, 0x0030, 0x0000, 0x0000, 0x0000, 0x0000},
        // } (37)
        {0x0000, 0x0000, 0x0C00, 0x0C00, 0x0300, 0x0300, 0x7FFE, 0x7FFE, 
         0x0300, 0x0300, 0x0C00, 0x0C00, 0x0000, 0x0000, 0x0000, 0x0000},
        // # (38)
        {0x0000, 0x0000, 0x0660, 0x0660, 0x7FFE, 0x7FFE, 0x0660, 0x0660, 
         0x0660, 0x0660, 0x7FFE, 0x7FFE, 0x0660, 0x0660, 0x0000, 0x0000},
        // $ (39)
        {0x0000, 0x0000, 0x0180, 0x0180, 0x1FF8, 0x1FF8, 0x6000, 0x6000, 
         0x1FF8, 0x1FF8, 0x0006, 0x0006, 0x7FF8, 0x7FF8, 0x0180, 0x0180},
        // % (40)
        {0x0000, 0x0000, 0x6006, 0x6006, 0x000C, 0x000C, 0x0018, 0x0018, 
         0x0060, 0x0060, 0x0180, 0x0180, 0x6006, 0x6006, 0x0000, 0x0000},
        // & (41)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 
         0x6006, 0x6006, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 0x0000, 0x0000},
        // * (42)
        {0x0000, 0x0000, 0x0660, 0x0660, 0x0180, 0x0180, 0x7FFE, 0x7FFE, 
         0x0180, 0x0180, 0x0660, 0x0660, 0x0000, 0x0000, 0x0000, 0x0000},
        // + (43)
        {0x0000, 0x0000, 0x0180, 0x0180, 0x0180, 0x0180, 0x7FFE, 0x7FFE, 
         0x0180, 0x0180, 0x0180, 0x0180, 0x0000, 0x0000, 0x0000, 0x0000},
        // , (44)
        {0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
         0x0000, 0x0000, 0x0180, 0x0180, 0x0300, 0x0300, 0x0000, 0x0000},
        // . (45)
        {0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 
         0x0000, 0x0000, 0x0180, 0x0180, 0x0000, 0x0000, 0x0000, 0x0000},
        // / (46)
        {0x0000, 0x0000, 0x0006, 0x0006, 0x000C, 0x000C, 0x0018, 0x0018, 
         0x0060, 0x0060, 0x0180, 0x0180, 0x0300, 0x0300, 0x0000, 0x0000},
        // 0 (47)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x6006, 0x6006, 
         0x6006, 0x6006, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 0x0000, 0x0000},
        // 1 (48)
        {0x0000, 0x0000, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 
         0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0180, 0x0000, 0x0000},
        // 2 (49)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x0006, 0x0006, 
         0x0018, 0x0018, 0x0060, 0x0060, 0x7FFE, 0x7FFE, 0x0000, 0x0000},
        // 3 (50)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x0018, 0x0018, 
         0x0006, 0x0006, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 0x0000, 0x0000},
        // 4 (51)
        {0x0000, 0x0000, 0x0006, 0x0006, 0x001E, 0x001E, 0x0066, 0x0066, 
         0x7FFE, 0x7FFE, 0x0006, 0x0006, 0x0006, 0x0006, 0x0000, 0x0000},
        // 5 (52)
        {0x0000, 0x0000, 0x7FFE, 0x7FFE, 0x6000, 0x6000, 0x7FFC, 0x7FFC, 
         0x0006, 0x0006, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 0x0000, 0x0000},
        // 6 (53)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x7FFC, 0x7FFC, 
         0x6006, 0x6006, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 0x0000, 0x0000},
        // 7 (54)
        {0x0000, 0x0000, 0x7FFE, 0x7FFE, 0x0006, 0x0006, 0x000C, 0x000C, 
         0x0018, 0x0018, 0x0060, 0x0060, 0x0180, 0x0180, 0x0000, 0x0000},
        // 8 (55)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 
         0x6006, 0x6006, 0x6006, 0x6006, 0x1FF8, 0x1FF8, 0x0000, 0x0000},
        // 9 (56)
        {0x0000, 0x0000, 0x1FF8, 0x1FF8, 0x6006, 0x6006, 0x6006, 0x6006, 
         0x1FFE, 0x1FFE, 0x0006, 0x0006, 0x1FF8, 0x1FF8, 0x0000, 0x0000}
    };
    
    if (c >= 'A' && c <= 'Z') {
        c = c - 'A';
    } else if (c >= 'a' && c <= 'z') {
        c = c - 'a';
    } else if (c >= '0' && c <= '9') {
        c = c - '0' + 47;
    } else if (c == ' ') {
        c = 26;
    } else if (c == '!') {
        c = 27;
    } else if (c == '?') {
        c = 28;
    } else if (c == ':') {
        c = 29;
    } else if (c == '-') {
        c = 30;
    } else if (c == '=') {
        c = 31;
    } else if (c == '(') {
        c = 32;
    } else if (c == ')') {
        c = 33;
    } else if (c == '[') {
        c = 34;
    } else if (c == ']') {
        c = 35;
    } else if (c == '{') {
        c = 36;
    } else if (c == '}') {
        c = 37;
    } else if (c == '#') {
        c = 38;
    } else if (c == '$') {
        c = 39;
    } else if (c == '%') {
        c = 40;
    } else if (c == '&') {
        c = 41;
    } else if (c == '*') {
        c = 42;
    } else if (c == '+') {
        c = 43;
    } else if (c == ',') {
        c = 44;
    } else if (c == '.') {
        c = 45;
    } else if (c == '/') {
        c = 46;
    } else {
        return; // Caracter no soportado
    }
    
    for (int dy = 0; dy < 16; dy++) {
        for (int dx = 0; dx < 16; dx++) {
            if (font_16x16[c][dy] & (0x8000 >> dx)) {
                draw_pixel_real(x + dx, y + dy, color);
            }
        }
    }
}

// Función para dibujar texto en hardware real
void draw_text_real(uint32_t x, uint32_t y, const char* text, uint32_t color) {
    uint32_t pos_x = x;
    for (int i = 0; text[i] != '\0'; i++) {
        if (text[i] == '\n') {
            y += 18;
            pos_x = x;
        } else {
            draw_char_real(pos_x, y, text[i], color);
            pos_x += 17;
        }
    }
}

// Función para dibujar logo de Eclipse OS en hardware real
void draw_eclipse_logo_real(uint32_t x, uint32_t y) {
    // Dibujar logo más grande y detallado para hardware real
    for (int dy = -30; dy <= 30; dy++) {
        for (int dx = -30; dx <= 30; dx++) {
            int dist = dx*dx + dy*dy;
            if (dist <= 900) { // Radio 30
                if (dist <= 400) { // Círculo interior
                    draw_pixel_real(x + dx, y + dy, COLOR_CYAN);
                } else { // Borde
                    draw_pixel_real(x + dx, y + dy, COLOR_WHITE);
                }
            }
        }
    }
    
    // Dibujar texto "Eclipse OS" más grande
    draw_text_real(x - 60, y + 40, "Eclipse OS", COLOR_WHITE);
}

// Función para dibujar barra de progreso en hardware real
void draw_progress_bar_real(uint32_t x, uint32_t y, uint32_t width, uint32_t height, uint32_t progress, uint32_t color) {
    // Fondo
    draw_rect_real(x, y, width, height, COLOR_DARK_GRAY);
    // Progreso
    draw_rect_real(x, y, (width * progress) / 100, height, color);
    // Borde
    draw_rect_real(x, y, width, 2, COLOR_WHITE);
    draw_rect_real(x, y + height - 2, width, 2, COLOR_WHITE);
    draw_rect_real(x, y, 2, height, COLOR_WHITE);
    draw_rect_real(x + width - 2, y, 2, height, COLOR_WHITE);
}

// Función para ejecutar Eclipse OS en hardware real
void execute_eclipse_os_real_hardware(void) {
    // Detectar hardware
    detect_vga_hardware();
    
    // Limpiar pantalla
    draw_rect_real(0, 0, hw_info.vga_width, hw_info.vga_height, COLOR_BLACK);
    
    // Dibujar fondo con gradiente más suave
    for (int y = 0; y < hw_info.vga_height; y++) {
        uint32_t color = (y * 0x40) / hw_info.vga_height;
        color = (color << 16) | (color << 8) | color; // Gradiente gris más suave
        draw_rect_real(0, y, hw_info.vga_width, 1, color);
    }
    
    // Dibujar logo de Eclipse OS
    draw_eclipse_logo_real(hw_info.vga_width / 2, 120);
    
    // Título principal
    draw_text_real(hw_info.vga_width / 2 - 200, 200, "Sistema Operativo Eclipse OS", COLOR_WHITE);
    draw_text_real(hw_info.vga_width / 2 - 150, 220, "Version 1.0 - Hardware Real", COLOR_LIGHT_GRAY);
    
    // Dibujar barra de progreso de inicialización
    draw_progress_bar_real(hw_info.vga_width / 2 - 250, 260, 500, 30, 0, COLOR_GREEN);
    
    // Simular inicialización
    for (int progress = 0; progress <= 100; progress += 5) {
        draw_progress_bar_real(hw_info.vga_width / 2 - 250, 260, 500, 30, progress, COLOR_GREEN);
        // Pausa más larga para hardware real
        for (volatile int i = 0; i < 2000000; i++);
    }
    
    // Dibujar información del hardware
    draw_text_real(80, 320, "Informacion del Hardware:", COLOR_YELLOW);
    draw_text_real(100, 340, "• VGA: 1024x768 @ 32bpp", COLOR_WHITE);
    draw_text_real(100, 360, "• Memoria: 512MB", COLOR_WHITE);
    draw_text_real(100, 380, "• CPU: 2.0GHz", COLOR_WHITE);
    draw_text_real(100, 400, "• Kernel: Multiboot compatible", COLOR_WHITE);
    
    // Dibujar características del sistema
    draw_text_real(80, 440, "Caracteristicas del Sistema:", COLOR_YELLOW);
    draw_text_real(100, 460, "• Kernel optimizado para hardware real", COLOR_WHITE);
    draw_text_real(100, 480, "• Drivers VGA nativos", COLOR_WHITE);
    draw_text_real(100, 500, "• Fuente 16x16 de alta calidad", COLOR_WHITE);
    draw_text_real(100, 520, "• Interfaz grafica moderna", COLOR_WHITE);
    draw_text_real(100, 540, "• Compatible con hardware fisico", COLOR_WHITE);
    
    // Dibujar aplicaciones disponibles
    draw_text_real(80, 580, "Aplicaciones Disponibles:", COLOR_YELLOW);
    draw_text_real(100, 600, "• Editor de texto", COLOR_CYAN);
    draw_text_real(100, 620, "• Explorador de archivos", COLOR_CYAN);
    draw_text_real(100, 640, "• Calculadora", COLOR_CYAN);
    draw_text_real(100, 660, "• Navegador web", COLOR_CYAN);
    
    // Dibujar estado del sistema
    draw_text_real(80, 700, "Estado del Sistema:", COLOR_YELLOW);
    draw_text_real(100, 720, "• Kernel: Inicializado", COLOR_GREEN);
    draw_text_real(100, 740, "• VGA: Activo", COLOR_GREEN);
    draw_text_real(100, 760, "• Sistema: Funcionando en hardware real", COLOR_GREEN);
    
    // Dibujar mensaje final
    draw_text_real(hw_info.vga_width / 2 - 150, hw_info.vga_height - 60, "Sistema Eclipse OS funcionando en hardware real!", COLOR_GREEN);
    draw_text_real(hw_info.vga_width / 2 - 100, hw_info.vga_height - 40, "Presiona Ctrl+Alt+Del para reiniciar", COLOR_LIGHT_GRAY);
}

// Función principal del kernel
void kernel_main(void) {
    // Ejecutar Eclipse OS en hardware real
    execute_eclipse_os_real_hardware();
    
    // Loop infinito
    while (1) {
        // Mantener el sistema funcionando
    }
}

// Punto de entrada
void _start(void) {
    kernel_main();
}


